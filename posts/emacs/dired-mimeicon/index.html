<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Emacs Dired Mimeicon mode - Reion's Think</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=author content="StaticMania"><meta name=generator content="Hugo 0.146.1"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/font-awesome/css/font-awesome.min.css><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;500;600;700" rel=stylesheet><link href=/scss/style.min.css rel=stylesheet><link rel="shortcut icon" href=/images/logo.svg type=image/x-icon><link rel=icon href=/images/logo.svg type=image/x-icon></head><body><nav class="navbar navbar-expand-lg site-navigation"><div class=container><a class=navbar-brand href=/><img src=/images/logo.svg alt=logo>
</a><button class="navbar-toggler collapsed" type=button data-toggle=collapse data-target=#sitenavbar>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button><div class="collapse navbar-collapse" id=sitenavbar><ul class="navbar-nav ml-auto main-nav"><li class=nav-item><a class=nav-link href=/>Home</a></li><li class=nav-item><a class=nav-link href=/posts>Posts</a></li><li class=nav-item><a class=nav-link href=/about>About</a></li></ul></div></div></nav><main><section class="site-blog details"><div class=container><div class="row justify-content-center"><div class=col-lg-8><article class=site-blog-details><p><span>May 26, 2023</span> by <span>Reion</span></p><h2 class=blog-title>Emacs Dired Mimeicon mode</h2><p>This extension allows to display file and folder icons in dired mode and uses mimetype as the displayed logo and adheres to the icon-theme-spec file naming convention, which will help you to apply icon themes that you can download from the internet in your emacs.</p><p><img src=screenshot2.png alt=|inline|border></p><p>From the code, I defined a minor mode of <strong>dired-mimeicon-mode</strong> that displays icons corresponding to the file types in a Dired buffer. The icons are displayed as overlays on top of the filenames. The icons are loaded from an icon theme located in a directory specified by dired-mimeicon-root-dir and dired-mimeicon-name. The icons are displayed as SVG images with a size of 26x26 pixels. The icon for a file is determined based on its MIME type using the mailcap library. If the MIME type is not recognized or an icon file is not found, a default icon is used.</p><p>The code defines several functions:</p><ul><li>dired-mimeicon-overlays-in: Returns a list of overlays in the specified region that have the dired-mimeicon-overlay property set.</li><li>dired-mimeicon-clear-overlays: Removes all overlays with the dired-mimeicon-overlay property in the buffer.</li><li>dired-mimeicon-insert-icon-to-overlay: Adds an icon overlay for a file at the specified position in the buffer.</li><li>dired-mimeicon-refresh: Refreshes the icons in the buffer by clearing existing overlays and creating new ones for each file in the buffer.</li><li>dired-mimeicon-refresh-advice: An advice function that calls dired-mimeicon-refresh after certain Dired functions are called.</li><li>dired-mimeicon-enable: Enables the dired-mimeicon-mode minor mode by adding advice to Dired functions and calling dired-mimeicon-refresh.</li><li>dired-mimeicon-disable: Disables the dired-mimeicon-mode minor mode by removing advice from Dired functions and clearing icon overlays.</li><li>dired-mimeicon-mode: The dired-mimeicon-mode minor mode itself. When enabled, it calls dired-mimeicon-enable. When disabled, it calls dired-mimeicon-disable.</li></ul><h1 id=installation>Installation</h1><ul><li>Clone the repository to your emacs extension directory</li><li>Add the following code to your ~/.emacs</li></ul><div class="goat svg-container"><svg font-family="Menlo,Lucida Console,monospace" viewBox="0 0 392 41"><g transform="translate(8,16)"><text text-anchor="middle" x="0" y="4" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="0" y="20" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="8" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="8" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="16" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="16" y="20" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="24" y="4" fill="currentcolor" style="font-size:1em">q</text><text text-anchor="middle" x="24" y="20" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="32" y="4" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="32" y="20" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="40" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="40" y="20" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="48" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="48" y="20" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="56" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="20" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="64" y="20" fill="currentcolor" style="font-size:1em">k</text><text text-anchor="middle" x="72" y="4" fill="currentcolor" style="font-size:1em">'</text><text text-anchor="middle" x="80" y="4" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="80" y="20" fill="currentcolor" style="font-size:1em">'</text><text text-anchor="middle" x="88" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="88" y="20" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="96" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="96" y="20" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="104" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="104" y="20" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="112" y="4" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="112" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="120" y="4" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="120" y="20" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="128" y="4" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="128" y="20" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="136" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="136" y="20" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="144" y="4" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="144" y="20" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="152" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="152" y="20" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="160" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="160" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="168" y="4" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="168" y="20" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="176" y="4" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="176" y="20" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="184" y="4" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="184" y="20" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="192" y="4" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="192" y="20" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="200" y="20" fill="currentcolor" style="font-size:1em">k</text><text text-anchor="middle" x="216" y="20" fill="currentcolor" style="font-size:1em">'</text><text text-anchor="middle" x="224" y="20" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="232" y="20" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="240" y="20" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="248" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="256" y="20" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="264" y="20" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="272" y="20" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="280" y="20" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="288" y="20" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="296" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="304" y="20" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="312" y="20" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="320" y="20" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="328" y="20" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="336" y="20" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="344" y="20" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="352" y="20" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="360" y="20" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="368" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="376" y="20" fill="currentcolor" style="font-size:1em">)</text></g></svg></div><h1 id=more-details>More details</h1><p><a href=https://github.com/reionwong/dired-mimeicon target=_blank>https://github.com/reionwong/dired-mimeicon</a></p></article></div></div></div></section><section class="site-blog details"><div class=container id=reion_blog_comments><div class="row justify-content-center"></div></div></section><script>const isDarkTheme=document.querySelector("body").classList.contains("theme-dark"),themeName=isDarkTheme?"dark":"light_protanopia",com_script=document.createElement("script");com_script.src="https://giscus.app/client.js",com_script.dataset.repo="reionwong/blog_comments",com_script.dataset.repoId="R_kgDOJrDnMQ",com_script.dataset.category="General",com_script.dataset.categoryId="DIC_kwDOJrDnMc4CW8lY",com_script.dataset.mapping="pathname",com_script.dataset.strict="0",com_script.dataset.reactionsEnabled="1",com_script.dataset.emitMetadata="0",com_script.dataset.inputPosition="bottom",com_script.dataset.theme=themeName,com_script.dataset.lang="en",com_script.dataset.loading="lazy",com_script.crossOrigin="anonymous",com_script.async=!0,document.getElementById("reion_blog_comments").appendChild(com_script)</script></main><footer class=site-footer><div class=container><div class=row><div class="col-lg-3 col-md-6"><div class=site-footer-widget><h5 class=site-footer-widget-title>Contact Info</h5><p class=site-footer-widget-description>reionwong@gmail.com<br><a href=tel:></a><br><a href=mailto:></a></p></div></div><div class="col-lg-2 col-md-6"><div class=site-footer-widget><h5 class=site-footer-widget-title>Sitemap</h5><ul class=site-footer-widget-links><li><a href=/about>About</a></li></ul></div></div><div class="col-lg-2 col-md-6"><div class=site-footer-widget><h5 class=site-footer-widget-title>Related</h5><ul class=site-footer-widget-links><li><a href=https://github.com/reionwong target=_blank>Github</a></li><li><a href=https://twitter.com/reionwong target=_blank>Twitter</a></li></ul></div></div><div class="col-lg-3 col-md-6"><div class=site-footer-widget><h5 class=site-footer-widget-title>Blogroll</h5><ul class=site-footer-widget-links><li><a href=https://felixc.at/ target=_blank>Felix’s Blog</a></li><li><a href=https://blog.han-li.cn/ target=_blank>Han Li’s Blog</a></li><li><a href=https://hiif.ong/ target=_blank>hiifong</a></li></ul></div></div><div class="col-lg-2 col-12"><a href=#top class=site-footer-widget-top><img src=/images/to-top.svg alt=back-to-top><p>To the top</p></a></div><div class=col-12><div class=site-footer-copyright><p>© Copyright 2025 - All Rights Reserved by Reion Wong</p></div></div></div></div></footer><script src=/js/vendor.min.js></script><script src=/js/script.min.js></script></body></html>